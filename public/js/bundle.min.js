"use strict";function init(){sticky(),windowScrollDown()}function sticky(){$(".sticky").sticky({topSpacing:60})}function windowScrollDown(){var e,t=0;$(window).scroll(function(){e=$(this).scrollTop(),$(window).scrollTop()>30&&(t>e?($(".home-page nav").removeClass("folded"),$(".home-page nav").css("border-bottom","0px solid")):$(".home-page nav").addClass("folded")),t=e,$(window).scrollTop()<10&&$(".home-page nav").addClass("top"),$(window).scrollTop()>10&&$(".home-page nav").removeClass("top"),$(window).scrollTop()>30,$(window).scrollTop()<540&&$(".home-page nav").css("box-shadow","inset 0 -1px 0px 0px rgba(0,0,0,0)"),$(window).scrollTop()>540&&$(".home-page nav").css("box-shadow","inset 0 -1px 0px 0px rgba(0,0,0,0.1)")})}function Account(e){this.getCurrentUser=function(){return e({method:"GET",url:"/api/auth/currentUser"})},this.sendVerifyCode=function(t){return e({method:"POST",url:"/api/verify/phone",data:t})},this.verifyCode=function(t){return e({method:"PUT",url:"/api/verify/phone",data:t})},this.getUserData=function(t){return e({method:"GET",url:"/api/users/"+t})},this.updateUserData=function(t,a){return e({method:"PUT",url:"/api/users/"+t,data:a})}}function Payment(e){this.chargeNow=function(t){return e({method:"POST",url:"/api/payment/chargeNow",data:t})}}function focus(e,t){return function(a){t(function(){e.$broadcast("focusOn",a)},0)}}function Plan(e,t){this.addSinglePreview=function(t){return e(function(e,a){localStorage.planPreviewData=JSON.stringify(t),e(localStorage.planPreviewData)})},this.getSinglePreview=function(){return e(function(e,t){e(JSON.parse(localStorage.planPreviewData))})}}function Storage(e){this.get=function(){},this.save=function(e){console.log("obj: ",e)}}function homeCtrl(e,t,a,o,n,r,l){function s(){t.getToken()?o.getCurrentUser(t.getToken()).then(function(t){console.log("@CurrentUser: ",t.data),e.currentUser=t.data},function(e){return a.go("authEntrance")}):!t.getToken()&&l.$$path.includes("dashboard")&&a.go("authEntrance")}r.$on("$stateChangeSuccess",function(t,o,n,i,d){r.previousState=i.name,r.currentState=o.name,console.log(r.previousState," >>> ",r.currentState),"authEntrance"==r.currentState&&e.currentUser&&a.go("dashboard"),e.currentUrl=l.$$path,s()})}function authCtrl(e,t,a,o,n,r){e.auth_enter=function(e){t.signup(e).then(function(e){t.setToken(e),a.go("dashboard",{},{reload:!0}),console.log("res @auth_enter: ",e.data)},function(e){return console.log("err @auth_enter: ",e)})},e.authenticate=function(e){t.authenticate(e)}}function dashboardCtrl(e,t,a,o,n,r,l){e.logout=function(){console.log("check"),t.logout(),e.currentUser=null,a.go("landing",{},{reload:!0}),l.location.reload()},e.sendVerifyCode=function(t){if(console.log("phone: ",t),t.length>5){var a={userData:n.currentUser,phone:t};o.sendVerifyCode(a).then(function(a){console.log("res @sendVerifyCode: ",a.data),n.currentUser.phone.data=t,e.verifyPhoneSentOut=!0},function(e){console.log("err @sendVerifyCode: ",e)})}},e.verifyCode=function(e){if(console.log("code: ",e),0!==e.length){var t={userData:n.currentUser,code:e};o.verifyCode(t).then(function(e){console.log("res @verifyCode: ",e.data),n.currentUser.phone.verified=!0},function(e){console.log("err @verifyCode: ",e)})}},e.doCheckout=function(e){console.log("fff"),console.log("token: ",e);var t={stripeToken:e,userData:n.currentUser};r.chargeNow(t).then(function(e){console.log("res: ",e.data)},function(e){console.log("err: ",e)})}}function dashboardPlanCtrl(e,t,a,o,n,r){console.log("dashboardPlanCtrl loaded"),"dashboard_plan_single"==r.currentState&&(e.updateTimes=function(t){e.installmentsGraphData=[];for(var a=0;t>a;a++){var o=~~(e.plan.total/t),n=~~(200*(2/t));e.installmentsGraphData.push({price:o,style:{height:n+"px",width:"90%"}})}},e.previewSinglePlan=function(e){console.log("plan: ",e),n.addSinglePreview(e).then(function(e){o.go("dashboard_plan_single_preview")},function(e){return console.log("err @addSinglePreview: ",e)})}),"dashboard_plan_single_preview"==r.currentState&&n.getSinglePreview().then(function(t){console.log("res @getSinglePreview: ",t),e.planPreview=t,e.planPreview.installment=(t.total-t.downpay)/t.times},function(e){return console.log("err @getSinglePreview: ",e)})}function focusOn(){return function(e,t,a){e.$on("focusOn",function(e,o){o===a.focusOn&&t[0].focus()})}}function toolTip(){return function(e,t,a){angular.element(".tool-tip").on("click mouseleave",hideTooltip),angular.element(".tool-tip").on("mouseenter",showTooltip)}}function hideTooltip(){$(this).tooltip("hide")}function showTooltip(){$(this).tooltip("show")}angular.module("pinchApp",["ui.router","satellizer","ngAnimate","ngFileUpload","ngImgCrop","stripe.checkout","angular-loading-bar","anim-in-out"]).config(["$stateProvider","$urlRouterProvider","$authProvider",function(e,t,a){Stripe.setPublishableKey("pk_test_t1eThhOKl6esrp6f4jyWqU4J"),e.state(landing).state(authEntrance).state(dashboard).state(dashboard_payment).state(dashboard_plan).state(dashboard_plan_start).state(dashboard_plan_choose).state(dashboard_plan_single).state(dashboard_plan_single_preview).state(dashboard_plan_multiple).state(dashboard_account),t.otherwise("/")}]);var landing={name:"landing",url:"/",views:{main:{templateUrl:"/html/landing.html",controller:"authCtrl"}}},authEntrance={name:"authEntrance",url:"/entrance",views:{main:{templateUrl:"/html/entrance.html",controller:"authCtrl"}}},dashboard={name:"dashboard",url:"/dashboard",views:{main:{templateUrl:"/html/dashboard.html",controller:"dashboardCtrl"}}},dashboard_payment={name:"dashboard_payment",url:"/payment",parent:"dashboard",views:{dashboard_section:{templateUrl:"/html/dashboard_payment.html",controller:"dashboardCtrl"}}},dashboard_plan={name:"dashboard_plan",url:"/plan",parent:"dashboard",views:{dashboard_section:{templateUrl:"/html/dashboard_plan.html",controller:"dashboardCtrl"}}},dashboard_plan_start={name:"dashboard_plan_start",url:"/start",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_start.html",controller:"dashboardCtrl"}}},dashboard_plan_choose={name:"dashboard_plan_choose",url:"/choose",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_choose.html",controller:"dashboardCtrl"}}},dashboard_plan_single={name:"dashboard_plan_single",url:"/choose/single",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_single.html",controller:"dashboardPlanCtrl"}}},dashboard_plan_single_preview={name:"dashboard_plan_single_preview",url:"/choose/single/preview",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_single_preview.html",controller:"dashboardPlanCtrl"}}},dashboard_plan_multiple={name:"dashboard_plan_multiple",url:"/choose/mutiple",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_multiple.html",controller:"dashboardCtrl"}}},dashboard_account={name:"dashboard_account",url:"/account",parent:"dashboard",views:{dashboard_section:{templateUrl:"/html/dashboard_account.html",controller:"dashboardCtrl"}}};$(document).ready(init),Account.$inject=["$http"],Payment.$inject=["$http"],focus.$inject=["$rootScope","$timeout"],Plan.$inject=["$q","Storage"],Storage.$inject=["$q"],angular.module("pinchApp").service("Account",Account).service("Payment",Payment).factory("focus",focus).service("Plan",Plan).service("Storage",Storage),homeCtrl.$inject=["$scope","$auth","$state","Account","$window","$rootScope","$location"],authCtrl.$inject=["$scope","$auth","$state","Account","$window","$rootScope"],dashboardCtrl.$inject=["$scope","$auth","$state","Account","$rootScope","Payment","$window"],dashboardPlanCtrl.$inject=["$scope","Account","$stateParams","$state","Plan","$rootScope"],angular.module("pinchApp").controller("homeCtrl",homeCtrl).controller("authCtrl",authCtrl).controller("dashboardCtrl",dashboardCtrl).controller("dashboardPlanCtrl",dashboardPlanCtrl),angular.module("pinchApp").directive("focusOn",focusOn),angular.module("pinchApp").directive("toolTip",toolTip);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFtb2R1bGUuanMiLCJtYWluLmpzIiwic2VydmljZXMuanMiLCJjb250cm9sbGVycy9jb250cm9sbGVycy5qcyIsImRpcmVjdGl2ZXMvZm9jdXNPbi5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Rvb2xUaXAuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImluaXQiLCJzdGlja3kiLCJ3aW5kb3dTY3JvbGxEb3duIiwiJCIsInRvcFNwYWNpbmciLCJzdCIsImxhc3RTY3JvbGxUb3AiLCJ3aW5kb3ciLCJzY3JvbGwiLCJ0aGlzIiwic2Nyb2xsVG9wIiwicmVtb3ZlQ2xhc3MiLCJjc3MiLCJhZGRDbGFzcyIsIkFjY291bnQiLCIkaHR0cCIsImdldEN1cnJlbnRVc2VyIiwibWV0aG9kIiwidXJsIiwic2VuZFZlcmlmeUNvZGUiLCJ1c2VyT2JqIiwiZGF0YSIsInZlcmlmeUNvZGUiLCJnZXRVc2VyRGF0YSIsInVyaVVzZXJJZCIsInVwZGF0ZVVzZXJEYXRhIiwiUGF5bWVudCIsImNoYXJnZU5vdyIsImRhdGFPYmoiLCJmb2N1cyIsIiRyb290U2NvcGUiLCIkdGltZW91dCIsIm5hbWUiLCIkYnJvYWRjYXN0IiwiUGxhbiIsIiRxIiwiU3RvcmFnZSIsImFkZFNpbmdsZVByZXZpZXciLCJwbGFuIiwicmVzIiwicmVxIiwibG9jYWxTdG9yYWdlIiwicGxhblByZXZpZXdEYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFNpbmdsZVByZXZpZXciLCJyZWoiLCJwYXJzZSIsImdldCIsInNhdmUiLCJvYmoiLCJjb25zb2xlIiwibG9nIiwiaG9tZUN0cmwiLCIkc2NvcGUiLCIkYXV0aCIsIiRzdGF0ZSIsIiR3aW5kb3ciLCIkbG9jYXRpb24iLCJnZXRUb2tlbiIsInRoZW4iLCJjdXJyZW50VXNlciIsImVyciIsImdvIiwiJCRwYXRoIiwiaW5jbHVkZXMiLCIkb24iLCJldiIsInRvIiwidG9QYXJhbXMiLCJmcm9tIiwiZnJvbVBhcmFtcyIsInByZXZpb3VzU3RhdGUiLCJjdXJyZW50U3RhdGUiLCJjdXJyZW50VXJsIiwiYXV0aEN0cmwiLCJhdXRoX2VudGVyIiwiYXV0aERhdGEiLCJzaWdudXAiLCJzZXRUb2tlbiIsInJlbG9hZCIsImF1dGhlbnRpY2F0ZSIsInByb3ZpZGVyIiwiZGFzaGJvYXJkQ3RybCIsImxvZ291dCIsImxvY2F0aW9uIiwicGhvbmUiLCJsZW5ndGgiLCJ1c2VyRGF0YSIsInZlcmlmeVBob25lU2VudE91dCIsImNvZGUiLCJ2ZXJpZmllZCIsImRvQ2hlY2tvdXQiLCJ0b2tlbiIsInN0cmlwZVRva2VuIiwiZGFzaGJvYXJkUGxhbkN0cmwiLCIkc3RhdGVQYXJhbXMiLCJ1cGRhdGVUaW1lcyIsInRpbWVzIiwiaW5zdGFsbG1lbnRzR3JhcGhEYXRhIiwiaSIsImluc3RhbGxtZW50IiwidG90YWwiLCJoZWlnaHQiLCJwdXNoIiwicHJpY2UiLCJzdHlsZSIsIndpZHRoIiwicHJldmlld1NpbmdsZVBsYW4iLCJwbGFuUHJldmlldyIsImRvd25wYXkiLCJmb2N1c09uIiwic2NvcGUiLCJlbGVtIiwiYXR0ciIsImUiLCJ0b29sVGlwIiwiZWxlbWVudCIsImF0dHJzIiwiYW5ndWxhciIsIm9uIiwiaGlkZVRvb2x0aXAiLCJzaG93VG9vbHRpcCIsInRvb2x0aXAiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRhdXRoUHJvdmlkZXIiLCJTdHJpcGUiLCJzZXRQdWJsaXNoYWJsZUtleSIsInN0YXRlIiwibGFuZGluZyIsImF1dGhFbnRyYW5jZSIsImRhc2hib2FyZCIsImRhc2hib2FyZF9wYXltZW50IiwiZGFzaGJvYXJkX3BsYW4iLCJkYXNoYm9hcmRfcGxhbl9zdGFydCIsImRhc2hib2FyZF9wbGFuX2Nob29zZSIsImRhc2hib2FyZF9wbGFuX3NpbmdsZSIsImRhc2hib2FyZF9wbGFuX3NpbmdsZV9wcmV2aWV3IiwiZGFzaGJvYXJkX3BsYW5fbXVsdGlwbGUiLCJkYXNoYm9hcmRfYWNjb3VudCIsIm90aGVyd2lzZSIsInZpZXdzIiwibWFpbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInBhcmVudCIsImRhc2hib2FyZF9zZWN0aW9uIiwiZGFzaGJvYXJkX2NoaWxkX3NlY3Rpb24iLCJkb2N1bWVudCIsInJlYWR5IiwiJGluamVjdCIsInNlcnZpY2UiLCJmYWN0b3J5IiwiZGlyZWN0aXZlIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ0lBLFNBQVNBLFFBRUxDLFNBQ0FDLG1CQUdKLFFBQVNELFVBQ0xFLEVBQUUsV0FBV0YsUUFDVEcsV0FBWSxLQUlwQixRQUFTRixvQkFDTCxHQUNJRyxHQURBQyxFQUFnQixDQUVwQkgsR0FBRUksUUFBUUMsT0FBTyxXQUViSCxFQUFLRixFQUFFTSxNQUFNQyxZQUNWUCxFQUFFSSxRQUFRRyxZQUFjLEtBQ2RKLEVBQUxELEdBQ0FGLEVBQUUsa0JBQWtCUSxZQUFZLFVBQ2hDUixFQUFFLGtCQUFrQlMsSUFBSSxnQkFBaUIsY0FFekNULEVBQUUsa0JBQWtCVSxTQUFTLFdBR3JDUCxFQUFnQkQsRUFFWkYsRUFBRUksUUFBUUcsWUFBYyxJQUN4QlAsRUFBRSxrQkFBa0JVLFNBQVMsT0FFN0JWLEVBQUVJLFFBQVFHLFlBQWMsSUFDeEJQLEVBQUUsa0JBQWtCUSxZQUFZLE9BRWhDUixFQUFFSSxRQUFRRyxZQUFjLEdBR3hCUCxFQUFFSSxRQUFRRyxZQUFjLEtBQ3hCUCxFQUFFLGtCQUFrQlMsSUFBSSxhQUFjLHNDQUV0Q1QsRUFBRUksUUFBUUcsWUFBYyxLQUN4QlAsRUFBRSxrQkFBa0JTLElBQUksYUFBYywwQ0NuQ2xELFFBQVNFLFNBQVFDLEdBQ2JOLEtBQUtPLGVBQWlCLFdBTWxCLE1BQU9ELElBQ0hFLE9BQVEsTUFDUkMsSUFBQSwyQkFGUlQsS0FBS1UsZUFBaUIsU0FBQUMsR0FNbEIsTUFBT0wsSUFDSEUsT0FBUSxPQUNSQyxJQUFBLG9CQUNBRyxLQUFNRCxLQUZkWCxLQUFLYSxXQUFhLFNBQUFGLEdBTWQsTUFBT0wsSUFDSEUsT0FBUSxNQUNSQyxJQUFBLG9CQUNBRyxLQUFN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USxZQUNSSixPQUNJSyxtQkFDSUgsWUFBYSwrQkFDYkMsV0FBWSxrQkN4S3hCaEosR0FBRW9KLFVBQVVDLE1BQU14SixNQ0FsQmMsUUFBUTJJLFNBQVcsU0FDbkIvSCxRQUFRK0gsU0FBVyxTQUNuQjVILE1BQU00SCxTQUFXLGFBQWMsWUFDL0J2SCxLQUFLdUgsU0FBVyxLQUFNLFdBQ3RCckgsUUFBUXFILFNBQVcsTUFKbkJsQyxRQUNLSyxPQUFPLFlBQ1A4QixRQUFRLFVBQVc1SSxTQUNuQjRJLFFBQVEsVUFBV2hJLFNBQ25CaUksUUFBUSxRQUFTOUgsT0FDakI2SCxRQUFRLE9BQVF4SCxNQUNoQndILFFBQVEsVUFBV3RILFNDTnhCaUIsU0FBU29HLFNBQVcsU0FBVSxRQUFTLFNBQVUsVUFBVyxVQUFXLGFBQWMsYUFDckY5RSxTQUFTOEUsU0FBVyxTQUFVLFFBQVMsU0FBVSxVQUFXLFVBQVcsY0FDdkV0RSxjQUFjc0UsU0FBVyxTQUFVLFFBQVMsU0FBVSxVQUFXLGFBQWMsVUFBVyxXQUMxRjFELGtCQUFrQjBELFNBQVcsU0FBVSxVQUFXLGVBQWdCLFNBQVUsT0FBUSxjQUhwRmxDLFFBQ0tLLE9BQU8sWUFDUHVCLFdBQVcsV0FBWTlGLFVBQ3ZCOEYsV0FBVyxXQUFZeEUsVUFDdkJ3RSxXQUFXLGdCQUFpQmhFLGVBQzVCZ0UsV0FBVyxvQkFBcUJwRCxtQkNMckN3QixRQUNLSyxPQUFPLFlBQ1BnQyxVQUFVLFVBQVc3QyxTQ0YxQlEsUUFDS0ssT0FBTyxZQUNQZ0MsVUFBVSxVQUFXeEMiLCJmaWxlIjoiYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ3BpbmNoQXBwJywgW1xuICAgICAgICAndWkucm91dGVyJyxcbiAgICAgICAgJ3NhdGVsbGl6ZXInLFxuICAgICAgICAnbmdBbmltYXRlJyxcbiAgICAgICAgLy8gJ3VpLmJvb3RzdHJhcCcsXG4gICAgICAgICduZ0ZpbGVVcGxvYWQnLFxuICAgICAgICAnbmdJbWdDcm9wJyxcbiAgICAgICAgJ3N0cmlwZS5jaGVja291dCcsXG4gICAgICAgICdhbmd1bGFyLWxvYWRpbmctYmFyJyxcbiAgICAgICAgJ2FuaW0taW4tb3V0J1xuICAgIF0pXG4gICAgLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkYXV0aFByb3ZpZGVyKSB7XG4gICAgICAgIFN0cmlwZS5zZXRQdWJsaXNoYWJsZUtleSgncGtfdGVzdF90MWVUaGhPS2w2ZXNycDZmNGp5V3FVNEonKVxuXG4gICAgICAgIC8vICRhdXRoUHJvdmlkZXJcbiAgICAgICAgLy8gICAgIC5mYWNlYm9vayh7XG4gICAgICAgIC8vICAgICAgICAgY2xpZW50SWQ6ICcyOTgxNjUxMTM4NDkzNjYnXG4gICAgICAgIC8vICAgICB9KTtcblxuICAgICAgICAkc3RhdGVQcm92aWRlclxuICAgICAgICAgICAgLnN0YXRlKGxhbmRpbmcpXG4gICAgICAgICAgICAuc3RhdGUoYXV0aEVudHJhbmNlKVxuICAgICAgICAgICAgLnN0YXRlKGRhc2hib2FyZClcbiAgICAgICAgICAgIC5zdGF0ZShkYXNoYm9hcmRfcGF5bWVudClcbiAgICAgICAgICAgIC5zdGF0ZShkYXNoYm9hcmRfcGxhbilcbiAgICAgICAgICAgIC5zdGF0ZShkYXNoYm9hcmRfcGxhbl9zdGFydClcbiAgICAgICAgICAgIC5zdGF0ZShkYXNoYm9hcmRfcGxhbl9jaG9vc2UpXG4gICAgICAgICAgICAuc3RhdGUoZGFzaGJvYXJkX3BsYW5fc2luZ2xlKVxuICAgICAgICAgICAgLnN0YXRlKGRhc2hib2FyZF9wbGFuX3NpbmdsZV9wcmV2aWV3KVxuICAgICAgICAgICAgLnN0YXRlKGRhc2hib2FyZF9wbGFuX211bHRpcGxlKVxuICAgICAgICAgICAgLnN0YXRlKGRhc2hib2FyZF9hY2NvdW50KVxuICAgICAgICAgICAgLy8gLnN0YXRlKHBwYWdlKVxuICAgICAgICAgICAgLy8gLnN0YXRlKHBwYWdlX3Byb2plY3RzKVxuICAgICAgICAgICAgLy8gLnN0YXRlKHBwYWdlX2xpa2VkKVxuICAgICAgICAgICAgLy8gLnN0YXRlKHBwYWdlX2ZvbGxvd2VycylcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9qZWN0cGFnZSlcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9qZWN0U2V0dGluZylcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9qZWN0U2V0dGluZ19nZW5lcmFsKVxuICAgICAgICAgICAgLy8gLnN0YXRlKHByb2plY3RTZXR0aW5nX3JlcXVlc3QpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHJvamVjdFNldHRpbmdfcHJpdmFjeSlcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9qZWN0U2V0dGluZ19kYW5nZXIpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHJvZmlsZVNldHRpbmcpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHJvZmlsZVNldHRpbmdfZ2VuZXJhbClcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9maWxlU2V0dGluZ19yZXF1ZXN0KVxuICAgICAgICAgICAgLy8gLnN0YXRlKHByb2ZpbGVTZXR0aW5nX3ByaXZhY3kpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHJvZmlsZVNldHRpbmdfZGFuZ2VyKVxuXG5cbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuICAgIH0pO1xuXG5cbmxldCBsYW5kaW5nID0ge1xuICAgIG5hbWU6ICdsYW5kaW5nJyxcbiAgICB1cmw6ICcvJyxcbiAgICB2aWV3czoge1xuICAgICAgICBtYWluOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2xhbmRpbmcuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnYXV0aEN0cmwnXG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgYXV0aEVudHJhbmNlID0ge1xuICAgIG5hbWU6ICdhdXRoRW50cmFuY2UnLFxuICAgIHVybDogJy9lbnRyYW5jZScsXG4gICAgdmlld3M6IHtcbiAgICAgICAgbWFpbjoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvaHRtbC9lbnRyYW5jZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhdXRoQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBkYXNoYm9hcmQgPSB7XG4gICAgbmFtZTogJ2Rhc2hib2FyZCcsXG4gICAgdXJsOiAnL2Rhc2hib2FyZCcsXG4gICAgdmlld3M6IHtcbiAgICAgICAgbWFpbjoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvaHRtbC9kYXNoYm9hcmQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZGFzaGJvYXJkQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cblxubGV0IGRhc2hib2FyZF9wYXltZW50ID0ge1xuICAgIG5hbWU6ICdkYXNoYm9hcmRfcGF5bWVudCcsXG4gICAgdXJsOiAnL3BheW1lbnQnLFxuICAgIHBhcmVudDogJ2Rhc2hib2FyZCcsXG4gICAgdmlld3M6IHtcbiAgICAgICAgZGFzaGJvYXJkX3NlY3Rpb246IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvZGFzaGJvYXJkX3BheW1lbnQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZGFzaGJvYXJkQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBkYXNoYm9hcmRfcGxhbiA9IHtcbiAgICBuYW1lOiAnZGFzaGJvYXJkX3BsYW4nLFxuICAgIHVybDogJy9wbGFuJyxcbiAgICBwYXJlbnQ6ICdkYXNoYm9hcmQnLFxuICAgIHZpZXdzOiB7XG4gICAgICAgIGRhc2hib2FyZF9zZWN0aW9uOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2Rhc2hib2FyZF9wbGFuLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2Rhc2hib2FyZEN0cmwnXG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgZGFzaGJvYXJkX3BsYW5fc3RhcnQgPSB7XG4gICAgbmFtZTogJ2Rhc2hib2FyZF9wbGFuX3N0YXJ0JyxcbiAgICB1cmw6ICcvc3RhcnQnLFxuICAgIHBhcmVudDogJ2Rhc2hib2FyZF9wbGFuJyxcbiAgICB2aWV3czoge1xuICAgICAgICBkYXNoYm9hcmRfY2hpbGRfc2VjdGlvbjoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvaHRtbC9kYXNoYm9hcmQvZGFzaGJvYXJkX3BsYW5fc3RhcnQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZGFzaGJvYXJkQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBkYXNoYm9hcmRfcGxhbl9jaG9vc2UgPSB7XG4gICAgbmFtZTogJ2Rhc2hib2FyZF9wbGFuX2Nob29zZScsXG4gICAgdXJsOiAnL2Nob29zZScsXG4gICAgcGFyZW50OiAnZGFzaGJvYXJkX3BsYW4nLFxuICAgIHZpZXdzOiB7XG4gICAgICAgIGRhc2hib2FyZF9jaGlsZF9zZWN0aW9uOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2Rhc2hib2FyZC9kYXNoYm9hcmRfcGxhbl9jaG9vc2UuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZGFzaGJvYXJkQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBkYXNoYm9hcmRfcGxhbl9zaW5nbGUgPSB7XG4gICAgbmFtZTogJ2Rhc2hib2FyZF9wbGFuX3NpbmdsZScsXG4gICAgdXJsOiAnL2Nob29zZS9zaW5nbGUnLFxuICAgIHBhcmVudDogJ2Rhc2hib2FyZF9wbGFuJyxcbiAgICB2aWV3czoge1xuICAgICAgICBkYXNoYm9hcmRfY2hpbGRfc2VjdGlvbjoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvaHRtbC9kYXNoYm9hcmQvZGFzaGJvYXJkX3BsYW5fc2luZ2xlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2Rhc2hib2FyZFBsYW5DdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGRhc2hib2FyZF9wbGFuX3NpbmdsZV9wcmV2aWV3ID0ge1xuICAgIG5hbWU6ICdkYXNoYm9hcmRfcGxhbl9zaW5nbGVfcHJldmlldycsXG4gICAgdXJsOiAnL2Nob29zZS9zaW5nbGUvcHJldmlldycsXG4gICAgcGFyZW50OiAnZGFzaGJvYXJkX3BsYW4nLFxuICAgIHZpZXdzOiB7XG4gICAgICAgIGRhc2hib2FyZF9jaGlsZF9zZWN0aW9uOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2Rhc2hib2FyZC9kYXNoYm9hcmRfcGxhbl9zaW5nbGVfcHJldmlldy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRQbGFuQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBkYXNoYm9hcmRfcGxhbl9tdWx0aXBsZSA9IHtcbiAgICBuYW1lOiAnZGFzaGJvYXJkX3BsYW5fbXVsdGlwbGUnLFxuICAgIHVybDogJy9jaG9vc2UvbXV0aXBsZScsXG4gICAgcGFyZW50OiAnZGFzaGJvYXJkX3BsYW4nLFxuICAgIHZpZXdzOiB7XG4gICAgICAgIGRhc2hib2FyZF9jaGlsZF9zZWN0aW9uOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2Rhc2hib2FyZC9kYXNoYm9hcmRfcGxhbl9tdWx0aXBsZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRDdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGRhc2hib2FyZF9hY2NvdW50ID0ge1xuICAgIG5hbWU6ICdkYXNoYm9hcmRfYWNjb3VudCcsXG4gICAgdXJsOiAnL2FjY291bnQnLFxuICAgIHBhcmVudDogJ2Rhc2hib2FyZCcsXG4gICAgdmlld3M6IHtcbiAgICAgICAgZGFzaGJvYXJkX3NlY3Rpb246IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvZGFzaGJvYXJkX2FjY291bnQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZGFzaGJvYXJkQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG4kKGRvY3VtZW50KS5yZWFkeShpbml0KTtcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnanF1ZXJ5IGxvYWRlZCcpO1xuICAgIHN0aWNreSgpXG4gICAgd2luZG93U2Nyb2xsRG93bigpXG59XG5cbmZ1bmN0aW9uIHN0aWNreSgpIHtcbiAgICAkKFwiLnN0aWNreVwiKS5zdGlja3koe1xuICAgICAgICB0b3BTcGFjaW5nOiA2MFxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIHdpbmRvd1Njcm9sbERvd24oKSB7XG4gICAgdmFyIGxhc3RTY3JvbGxUb3AgPSAwXG4gICAgdmFyIHN0XG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJCh3aW5kb3cpLnNjcm9sbFRvcCgpKTtcbiAgICAgICAgc3QgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xuICAgICAgICBpZigkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAzMCl7XG4gICAgICAgICAgICBpZiAoc3QgPCBsYXN0U2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICAgICAgJCgnLmhvbWUtcGFnZSBuYXYnKS5yZW1vdmVDbGFzcygnZm9sZGVkJylcbiAgICAgICAgICAgICAgICAkKCcuaG9tZS1wYWdlIG5hdicpLmNzcygnYm9yZGVyLWJvdHRvbScsICcwcHggc29saWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmhvbWUtcGFnZSBuYXYnKS5hZGRDbGFzcygnZm9sZGVkJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsYXN0U2Nyb2xsVG9wID0gc3RcblxuICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpIDwgMTApIHtcbiAgICAgICAgICAgICQoJy5ob21lLXBhZ2UgbmF2JykuYWRkQ2xhc3MoJ3RvcCcpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDEwKSB7XG4gICAgICAgICAgICAkKCcuaG9tZS1wYWdlIG5hdicpLnJlbW92ZUNsYXNzKCd0b3AnKVxuICAgICAgICB9XG4gICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiAzMCkge1xuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA8IDU0MCkge1xuICAgICAgICAgICAgJCgnLmhvbWUtcGFnZSBuYXYnKS5jc3MoJ2JveC1zaGFkb3cnLCAnaW5zZXQgMCAtMXB4IDBweCAwcHggcmdiYSgwLDAsMCwwKScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiA1NDApIHtcbiAgICAgICAgICAgICQoJy5ob21lLXBhZ2UgbmF2JykuY3NzKCdib3gtc2hhZG93JywgJ2luc2V0IDAgLTFweCAwcHggMHB4IHJnYmEoMCwwLDAsMC4xKScpO1xuICAgICAgICB9XG5cbiAgICB9KVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgncGluY2hBcHAnKVxuICAgIC5zZXJ2aWNlKCdBY2NvdW50JywgQWNjb3VudClcbiAgICAuc2VydmljZSgnUGF5bWVudCcsIFBheW1lbnQpXG4gICAgLmZhY3RvcnkoJ2ZvY3VzJywgZm9jdXMpXG4gICAgLnNlcnZpY2UoJ1BsYW4nLCBQbGFuKVxuICAgIC5zZXJ2aWNlKCdTdG9yYWdlJywgU3RvcmFnZSlcblxuZnVuY3Rpb24gQWNjb3VudCgkaHR0cCkge1xuICAgIHRoaXMuZ2V0Q3VycmVudFVzZXIgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgdXJsOiBgL2FwaS9hdXRoL2N1cnJlbnRVc2VyYFxuICAgICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnNlbmRWZXJpZnlDb2RlID0gKHVzZXJPYmopID0+IHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBgL2FwaS92ZXJpZnkvcGhvbmVgLFxuICAgICAgICAgICAgZGF0YTogdXNlck9ialxuICAgICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnZlcmlmeUNvZGUgPSAodXNlck9iaikgPT4ge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgICAgICAgIHVybDogYC9hcGkvdmVyaWZ5L3Bob25lYCxcbiAgICAgICAgICAgIGRhdGE6IHVzZXJPYmpcbiAgICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5nZXRVc2VyRGF0YSA9ICh1cmlVc2VySWQpID0+IHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6IGAvYXBpL3VzZXJzLyR7dXJpVXNlcklkfWBcbiAgICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy51cGRhdGVVc2VyRGF0YSA9ICh1cmlVc2VySWQsIHVwZGF0ZVVzZXJEYXRhKSA9PiB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgdXJsOiBgL2FwaS91c2Vycy8ke3VyaVVzZXJJZH1gLFxuICAgICAgICAgICAgZGF0YTogdXBkYXRlVXNlckRhdGFcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFBheW1lbnQoJGh0dHApIHtcbiAgICB0aGlzLmNoYXJnZU5vdyA9IChkYXRhT2JqKSA9PiB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogYC9hcGkvcGF5bWVudC9jaGFyZ2VOb3dgLFxuICAgICAgICAgICAgZGF0YTogZGF0YU9ialxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZm9jdXMoJHJvb3RTY29wZSwgJHRpbWVvdXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZm9jdXNPbicsIG5hbWUpO1xuICAgICAgICB9LCAwKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFBsYW4oJHEsIFN0b3JhZ2UpIHtcbiAgICB0aGlzLmFkZFNpbmdsZVByZXZpZXcgPSAocGxhbikgPT4ge1xuICAgICAgICByZXR1cm4gJHEoKHJlcywgcmVxKSA9PiB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucGxhblByZXZpZXdEYXRhID0gSlNPTi5zdHJpbmdpZnkocGxhbilcbiAgICAgICAgICAgIHJlcyhsb2NhbFN0b3JhZ2UucGxhblByZXZpZXdEYXRhKVxuICAgICAgICB9KVxuICAgIH1cbiAgICB0aGlzLmdldFNpbmdsZVByZXZpZXcgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAkcSgocmVzLCByZWopID0+IHtcbiAgICAgICAgICAgIHJlcyhKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5wbGFuUHJldmlld0RhdGEpKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gU3RvcmFnZSgkcSkge1xuICAgIHRoaXMuZ2V0ID0gKCkgPT4ge1xuICAgICAgICAvLyByZXR1cm4gJHEoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgIC8vICAgICBpZiAoIWxvY2FsU3RvcmFnZS5zZXBlcnBheSkge1xuICAgICAgICAvLyAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXBlcnBheSA9IHt9XG4gICAgICAgIC8vICAgICAgICAgcmVzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlcGVycGF5KSlcbiAgICAgICAgLy8gICAgIH0gZWxzZSBpZiAobG9jYWxTdG9yYWdlLnNlcGVycGF5KSB7XG4gICAgICAgIC8vICAgICAgICAgcmVzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlcGVycGF5KSlcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICB9XG5cbiAgICB0aGlzLnNhdmUgPSAob2JqKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdvYmo6ICcsIG9iaik7XG4gICAgICAgIC8vIHZhciBrZXkgPSBvYmpcbiAgICAgICAgLy8gdmFyIG9iaiA9IEpTT04uc3RyaW5naWZ5KG9iailcbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlXG4gICAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgncGluY2hBcHAnKVxuICAgIC5jb250cm9sbGVyKCdob21lQ3RybCcsIGhvbWVDdHJsKVxuICAgIC5jb250cm9sbGVyKCdhdXRoQ3RybCcsIGF1dGhDdHJsKVxuICAgIC5jb250cm9sbGVyKCdkYXNoYm9hcmRDdHJsJywgZGFzaGJvYXJkQ3RybClcbiAgICAuY29udHJvbGxlcignZGFzaGJvYXJkUGxhbkN0cmwnLCBkYXNoYm9hcmRQbGFuQ3RybClcblxuZnVuY3Rpb24gaG9tZUN0cmwoJHNjb3BlLCAkYXV0aCwgJHN0YXRlLCBBY2NvdW50LCAkd2luZG93LCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pIHtcbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKGV2LCB0bywgdG9QYXJhbXMsIGZyb20sIGZyb21QYXJhbXMpIHtcbiAgICAgICAgJHJvb3RTY29wZS5wcmV2aW91c1N0YXRlID0gZnJvbS5uYW1lO1xuICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRTdGF0ZSA9IHRvLm5hbWU7XG4gICAgICAgIGNvbnNvbGUubG9nKCRyb290U2NvcGUucHJldmlvdXNTdGF0ZSwgJyA+Pj4gJywgJHJvb3RTY29wZS5jdXJyZW50U3RhdGUpXG4gICAgICAgIGlmICgkcm9vdFNjb3BlLmN1cnJlbnRTdGF0ZSA9PSAnYXV0aEVudHJhbmNlJyAmJiAkc2NvcGUuY3VycmVudFVzZXIpICRzdGF0ZS5nbygnZGFzaGJvYXJkJylcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRVcmwgPSAkbG9jYXRpb24uJCRwYXRoO1xuICAgICAgICBnZXRDdXJyZW50VXNlcigpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCkge1xuICAgICAgICBpZiAoJGF1dGguZ2V0VG9rZW4oKSkge1xuICAgICAgICAgICAgQWNjb3VudC5nZXRDdXJyZW50VXNlcigkYXV0aC5nZXRUb2tlbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdAQ3VycmVudFVzZXI6ICcsIHJlcy5kYXRhKVxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSByZXMuZGF0YVxuICAgICAgICAgICAgICAgIH0sIChlcnIpID0+ICRzdGF0ZS5nbygnYXV0aEVudHJhbmNlJykpXG4gICAgICAgIH0gZWxzZSBpZiAoISRhdXRoLmdldFRva2VuKCkgJiYgJGxvY2F0aW9uLiQkcGF0aC5pbmNsdWRlcygnZGFzaGJvYXJkJykpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnYXV0aEVudHJhbmNlJylcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gYXV0aEN0cmwoJHNjb3BlLCAkYXV0aCwgJHN0YXRlLCBBY2NvdW50LCAkd2luZG93LCAkcm9vdFNjb3BlKSB7XG4gICAgJHNjb3BlLmF1dGhfZW50ZXIgPSAoYXV0aERhdGEpID0+IHtcbiAgICAgICAgJGF1dGguc2lnbnVwKGF1dGhEYXRhKVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAkYXV0aC5zZXRUb2tlbihyZXMpO1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJywge30sIHtcbiAgICAgICAgICAgICAgICAgICAgcmVsb2FkOiB0cnVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzIEBhdXRoX2VudGVyOiAnLCByZXMuZGF0YSlcbiAgICAgICAgICAgIH0sIChlcnIpID0+IGNvbnNvbGUubG9nKCdlcnIgQGF1dGhfZW50ZXI6ICcsIGVycikpXG4gICAgfVxuXG4gICAgJHNjb3BlLmF1dGhlbnRpY2F0ZSA9IChwcm92aWRlcikgPT4ge1xuICAgICAgICAkYXV0aC5hdXRoZW50aWNhdGUocHJvdmlkZXIpO1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiBkYXNoYm9hcmRDdHJsKCRzY29wZSwgJGF1dGgsICRzdGF0ZSwgQWNjb3VudCwgJHJvb3RTY29wZSwgUGF5bWVudCwgJHdpbmRvdykge1xuICAgIC8vIGNvbnNvbGUubG9nKCdkYXNoYm9hcmRDdHJsIGxvYWRlZCcpXG4gICAgLy8gY2hlY2tWZXJpZnlQaG9uZVNlbnRTdGF0dXMoJHJvb3RTY29wZS5jdXJyZW50VXNlcilcblxuICAgICRzY29wZS5sb2dvdXQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjaGVjaycpO1xuICAgICAgICAkYXV0aC5sb2dvdXQoKVxuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSBudWxsO1xuICAgICAgICAkc3RhdGUuZ28oJ2xhbmRpbmcnLCB7fSwge1xuICAgICAgICAgICAgcmVsb2FkOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgICR3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2tWZXJpZnlQaG9uZVNlbnRTdGF0dXMoY3VycmVudFVzZXJEYXRhKSB7XG4gICAgICAgICRzY29wZS52ZXJpZnlQaG9uZVNlbnRPdXQgPSBmYWxzZVxuXG4gICAgICAgIGxldCBleHBpcmVkVGltZSA9IE51bWJlcihjdXJyZW50VXNlckRhdGEucGhvbmUudmVyaWZ5Q29kZS5leHBpcmVkQXQpXG4gICAgICAgIGxldCBub3dUaW1lID0gRGF0ZS5ub3coKVxuICAgICAgICBpZiAoZXhwaXJlZFRpbWUgPiBub3dUaW1lKSB7XG4gICAgICAgICAgICAkc2NvcGUudmVyaWZ5UGhvbmVTZW50T3V0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUudmVyaWZ5UGhvbmVDb3VudERvd24gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYCR7ZXhwaXJlZFRpbWV9YFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnNlbmRWZXJpZnlDb2RlID0gKHBob25lKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwaG9uZTogJywgcGhvbmUpXG4gICAgICAgIGlmIChwaG9uZS5sZW5ndGggPiA1KSB7XG4gICAgICAgICAgICB2YXIgdXNlck9iaiA9IHtcbiAgICAgICAgICAgICAgICB1c2VyRGF0YTogJHJvb3RTY29wZS5jdXJyZW50VXNlcixcbiAgICAgICAgICAgICAgICBwaG9uZTogcGhvbmVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFjY291bnQuc2VuZFZlcmlmeUNvZGUodXNlck9iailcbiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzIEBzZW5kVmVyaWZ5Q29kZTogJywgcmVzLmRhdGEpXG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuY3VycmVudFVzZXIucGhvbmUuZGF0YSA9IHBob25lO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudmVyaWZ5UGhvbmVTZW50T3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LCBlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyIEBzZW5kVmVyaWZ5Q29kZTogJywgZXJyKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuICAgICRzY29wZS52ZXJpZnlDb2RlID0gKGNvZGUpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NvZGU6ICcsIGNvZGUpXG4gICAgICAgIGlmIChjb2RlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgdmFyIHVzZXJPYmogPSB7XG4gICAgICAgICAgICAgICAgdXNlckRhdGE6ICRyb290U2NvcGUuY3VycmVudFVzZXIsXG4gICAgICAgICAgICAgICAgY29kZTogY29kZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQWNjb3VudC52ZXJpZnlDb2RlKHVzZXJPYmopXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcyBAdmVyaWZ5Q29kZTogJywgcmVzLmRhdGEpXG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuY3VycmVudFVzZXIucGhvbmUudmVyaWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0sIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnIgQHZlcmlmeUNvZGU6ICcsIGVycik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5kb0NoZWNrb3V0ID0gKHRva2VuKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdmZmYnKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuOiAnLCB0b2tlbik7XG4gICAgICAgIHZhciBkYXRhT2JqID0ge1xuICAgICAgICAgICAgc3RyaXBlVG9rZW46IHRva2VuLFxuICAgICAgICAgICAgdXNlckRhdGE6ICRyb290U2NvcGUuY3VycmVudFVzZXJcbiAgICAgICAgfVxuICAgICAgICBQYXltZW50LmNoYXJnZU5vdyhkYXRhT2JqKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVzOiAnLCByZXMuZGF0YSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogJywgZXJyKTtcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRhc2hib2FyZFBsYW5DdHJsKCRzY29wZSwgQWNjb3VudCwgJHN0YXRlUGFyYW1zLCAkc3RhdGUsIFBsYW4sICRyb290U2NvcGUpIHtcbiAgICBjb25zb2xlLmxvZygnZGFzaGJvYXJkUGxhbkN0cmwgbG9hZGVkJyk7XG5cbiAgICBpZiAoJHJvb3RTY29wZS5jdXJyZW50U3RhdGUgPT0gJ2Rhc2hib2FyZF9wbGFuX3NpbmdsZScpIHtcbiAgICAgICAgJHNjb3BlLnVwZGF0ZVRpbWVzID0gKHRpbWVzKSA9PiB7XG4gICAgICAgICAgICAkc2NvcGUuaW5zdGFsbG1lbnRzR3JhcGhEYXRhID0gW11cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGltZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpbnN0YWxsbWVudCA9IH5+KCgkc2NvcGUucGxhbi50b3RhbCAvIHRpbWVzKSk7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IH5+KDIwMCAqICgyIC8gdGltZXMpKVxuICAgICAgICAgICAgICAgICRzY29wZS5pbnN0YWxsbWVudHNHcmFwaERhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBpbnN0YWxsbWVudCxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogYCR7aGVpZ2h0fXB4YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBgOTAlYFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5wcmV2aWV3U2luZ2xlUGxhbiA9IChwbGFuKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncGxhbjogJywgcGxhbik7XG4gICAgICAgICAgICBQbGFuLmFkZFNpbmdsZVByZXZpZXcocGxhbikudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkX3BsYW5fc2luZ2xlX3ByZXZpZXcnKVxuICAgICAgICAgICAgfSwgZXJyID0+IGNvbnNvbGUubG9nKCdlcnIgQGFkZFNpbmdsZVByZXZpZXc6ICcsIGVycikpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoJHJvb3RTY29wZS5jdXJyZW50U3RhdGUgPT0gJ2Rhc2hib2FyZF9wbGFuX3NpbmdsZV9wcmV2aWV3Jykge1xuICAgICAgICBQbGFuLmdldFNpbmdsZVByZXZpZXcoKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVzIEBnZXRTaW5nbGVQcmV2aWV3OiAnLCByZXMpXG4gICAgICAgICAgICAkc2NvcGUucGxhblByZXZpZXcgPSByZXM7XG4gICAgICAgICAgICAkc2NvcGUucGxhblByZXZpZXcuaW5zdGFsbG1lbnQgPSAocmVzLnRvdGFsIC0gcmVzLmRvd25wYXkpIC8gcmVzLnRpbWVzXG4gICAgICAgIH0sIGVyciA9PiBjb25zb2xlLmxvZygnZXJyIEBnZXRTaW5nbGVQcmV2aWV3OiAnLCBlcnIpKVxuICAgIH1cbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ3BpbmNoQXBwJylcbiAgICAuZGlyZWN0aXZlKCdmb2N1c09uJywgZm9jdXNPbilcblxuZnVuY3Rpb24gZm9jdXNPbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHIpIHtcbiAgICAgICAgc2NvcGUuJG9uKCdmb2N1c09uJywgZnVuY3Rpb24oZSwgbmFtZSkge1xuICAgICAgICAgICAgaWYgKG5hbWUgPT09IGF0dHIuZm9jdXNPbikge1xuICAgICAgICAgICAgICAgIGVsZW1bMF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuICAgIC5tb2R1bGUoJ3BpbmNoQXBwJylcbiAgICAuZGlyZWN0aXZlKCd0b29sVGlwJywgdG9vbFRpcClcblxuZnVuY3Rpb24gdG9vbFRpcCgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnRvb2wtdGlwJykub24oJ2NsaWNrIG1vdXNlbGVhdmUnLCBoaWRlVG9vbHRpcCk7XG4gICAgICAgIGFuZ3VsYXIuZWxlbWVudCgnLnRvb2wtdGlwJykub24oJ21vdXNlZW50ZXInLCBzaG93VG9vbHRpcCk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaGlkZVRvb2x0aXAoKSB7XG4gICAgJCh0aGlzKS50b29sdGlwKCdoaWRlJyk7XG59XG5cbmZ1bmN0aW9uIHNob3dUb29sdGlwKCkge1xuICAgICQodGhpcykudG9vbHRpcCgnc2hvdycpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
