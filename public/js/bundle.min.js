"use strict";function init(){sticky(),windowScrollDown()}function sticky(){$(".singlePlanPreviewSticky").sticky({topSpacing:80})}function windowScrollDown(){var e,a=0;$(window).scroll(function(){e=$(this).scrollTop(),$(window).scrollTop()>30&&(a>e?($(".home-page nav").removeClass("folded"),$(".home-page nav").css("border-bottom","0px solid")):$(".home-page nav").addClass("folded")),a=e,$(window).scrollTop()<10&&$(".home-page nav").addClass("top"),$(window).scrollTop()>10&&$(".home-page nav").removeClass("top"),$(window).scrollTop()>30,$(window).scrollTop()<540&&$(".home-page nav").css("box-shadow","inset 0 -1px 0px 0px rgba(0,0,0,0)"),$(window).scrollTop()>540&&$(".home-page nav").css("box-shadow","inset 0 -1px 0px 0px rgba(0,0,0,0.1)")})}function Account(e){this.getCurrentUser=function(){return e({method:"GET",url:"/api/auth/currentUser"})},this.sendVerifyCode=function(a){return e({method:"POST",url:"/api/verify/phone",data:a})},this.verifyCode=function(a){return e({method:"PUT",url:"/api/verify/phone",data:a})},this.getUserData=function(a){return e({method:"GET",url:"/api/users/"+a})},this.updateUserData=function(a,n){return e({method:"PUT",url:"/api/users/"+a,data:n})}}function Payment(e){this.chargeNow=function(a){return e({method:"POST",url:"/api/payment/chargeNow",data:a})}}function focus(e,a){return function(n){a(function(){e.$broadcast("focusOn",n)},0)}}function Plan(e,a,n){this.addSinglePreview=function(a){return e(function(e,n){localStorage.planPreviewData=JSON.stringify(a),e(localStorage.planPreviewData)})},this.getSinglePreview=function(){return e(function(e,a){e(JSON.parse(localStorage.planPreviewData))})},this.saveSinglePlan=function(e){return n({method:"POST",url:"/api/plans/saveSinglePlan",data:e})}}function Storage(e){this.get=function(){},this.save=function(e){console.log("obj: ",e)}}function homeCtrl(e,a,n,t,o,r,l){function s(){a.getToken()?t.getCurrentUser(a.getToken()).then(function(e){console.log("@CurrentUser: ",e.data),r.currentUser=e.data},function(e){return n.go("authEntrance")}):!a.getToken()&&l.$$path.includes("dashboard")&&n.go("authEntrance")}r.$on("$stateChangeSuccess",function(a,t,o,i,d){r.previousState=i.name,r.currentState=t.name,console.log(r.previousState," >>> ",r.currentState),"authEntrance"==r.currentState&&e.currentUser&&n.go("dashboard"),e.currentUrl=l.$$path,s()})}function authCtrl(e,a,n,t,o,r){e.auth_enter=function(e){a.signup(e).then(function(e){a.setToken(e),n.go("dashboard",{},{reload:!0}),console.log("res @auth_enter: ",e.data)},function(e){return console.log("err @auth_enter: ",e)})},e.authenticate=function(e){a.authenticate(e)}}function dashboardCtrl(e,a,n,t,o,r,l){e.logout=function(){console.log("check"),a.logout(),e.currentUser=null,n.go("landing",{},{reload:!0}),l.location.reload()},e.sendVerifyCode=function(a){if(console.log("phone: ",a),a.length>5){var n={userData:o.currentUser,phone:a};console.log("userObj: ",n),t.sendVerifyCode(n).then(function(n){console.log("res @sendVerifyCode: ",n.data),o.currentUser.phone.data=a,e.verifyPhoneSentOut=!0},function(e){console.log("err @sendVerifyCode: ",e)})}},e.verifyCode=function(e){if(console.log("code: ",e),0!==e.length){var a={userData:o.currentUser,code:e};t.verifyCode(a).then(function(e){console.log("res @verifyCode: ",e.data),e.data.msg?"incorrect"==e.data.msg?console.log("err: incorrect"):(e.data.msg="expired")&&console.log("err: expired"):o.currentUser.phone.verified=!0},function(e){console.log("err @verifyCode: ",e)})}},e.doCheckout=function(e){console.log("fff"),console.log("token: ",e);var a={stripeToken:e,userData:o.currentUser};r.chargeNow(a).then(function(e){console.log("res: ",e.data)},function(e){console.log("err: ",e)})}}function dashboardPlanCtrl(e,a,n,t,o,r){console.log("dashboardPlanCtrl loaded"),"dashboard_plan_single"==r.currentState&&(e.updateTimes=function(a){e.installmentsGraphData=[];for(var n=0;a>n;n++){var t=~~(e.plan.total/a),o=~~(200*(2/a));e.installmentsGraphData.push({price:t,style:{height:o+"px",width:"90%"}})}},e.defaultPlanTimes=function(a){return a?e.plan:e.plan.times=3},e.previewSinglePlan=function(e){console.log("plan: ",e),o.addSinglePreview(e).then(function(e){t.go("dashboard_plan_single_preview")},function(e){return console.log("err @addSinglePreview: ",e)})},e.plan={},e.singlePayment=function(){return(e.plan.total-e.plan.downpay)/e.plan.times},e.intervalSelected=function(a){e.plan.interval==a?e.plan.interval=null:e.plan.interval=a},"dashboard_plan_single_preview"==r.previousState&&o.getSinglePreview().then(function(a){console.log("res @getSinglePreview data back: ",a),e.plan=a,e.plan.times=a.times},function(e){return console.log("err @getSinglePreview: ",e)})),"dashboard_plan_single_preview"==r.currentState&&(o.getSinglePreview().then(function(a){console.log("res @getSinglePreview: ",a),e.planPreview=a,e.planPreview.installment=(a.total-a.downpay)/a.times},function(e){return console.log("err @getSinglePreview: ",e)}),e.saveSinglePlan=function(e){var a={planDetails:e,creator:r.currentUser};console.log("saveSinglePlanInfo: ",a),o.saveSinglePlan(a).then(function(e){console.log("res @saveSinglePlan: ",e.data)},function(e){return console.log("err @saveSinglePlan: ",e)})})}function focusOn(){return function(e,a,n){e.$on("focusOn",function(e,t){t===n.focusOn&&a[0].focus()})}}function toolTip(){return function(e,a,n){angular.element(".tool-tip").on("click mouseleave",hideTooltip),angular.element(".tool-tip").on("mouseenter",showTooltip)}}function hideTooltip(){$(this).tooltip("hide")}function showTooltip(){$(this).tooltip("show")}angular.module("pinchApp",["ui.router","satellizer","ngAnimate","ngFileUpload","ngImgCrop","stripe.checkout","angular-loading-bar","anim-in-out"]).config(["$stateProvider","$urlRouterProvider","$authProvider",function(e,a,n){Stripe.setPublishableKey("pk_test_t1eThhOKl6esrp6f4jyWqU4J"),e.state(landing).state(authEntrance).state(dashboard).state(dashboard_payment).state(dashboard_plan).state(dashboard_plan_start).state(dashboard_plan_choose).state(dashboard_plan_single).state(dashboard_plan_single_preview).state(dashboard_plan_multiple).state(dashboard_account),a.otherwise("/")}]);var landing={name:"landing",url:"/",views:{main:{templateUrl:"/html/landing.html",controller:"authCtrl"}}},authEntrance={name:"authEntrance",url:"/entrance",views:{main:{templateUrl:"/html/entrance.html",controller:"authCtrl"}}},dashboard={name:"dashboard",url:"/dashboard",views:{main:{templateUrl:"/html/dashboard.html",controller:"dashboardCtrl"}}},dashboard_payment={name:"dashboard_payment",url:"/payment",parent:"dashboard",views:{dashboard_section:{templateUrl:"/html/dashboard_payment.html",controller:"dashboardCtrl"}}},dashboard_plan={name:"dashboard_plan",url:"/plan",parent:"dashboard",views:{dashboard_section:{templateUrl:"/html/dashboard_plan.html",controller:"dashboardCtrl"}}},dashboard_plan_start={name:"dashboard_plan_start",url:"/start",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_start.html",controller:"dashboardCtrl"}}},dashboard_plan_choose={name:"dashboard_plan_choose",url:"/choose",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_choose.html",controller:"dashboardCtrl"}}},dashboard_plan_single={name:"dashboard_plan_single",url:"/choose/single",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_single.html",controller:"dashboardPlanCtrl"}}},dashboard_plan_single_preview={name:"dashboard_plan_single_preview",url:"/choose/single/preview",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_single_preview.html",controller:"dashboardPlanCtrl"}}},dashboard_plan_multiple={name:"dashboard_plan_multiple",url:"/choose/mutiple",parent:"dashboard_plan",views:{dashboard_child_section:{templateUrl:"/html/dashboard/dashboard_plan_multiple.html",controller:"dashboardCtrl"}}},dashboard_account={name:"dashboard_account",url:"/account",parent:"dashboard",views:{dashboard_section:{templateUrl:"/html/dashboard_account.html",controller:"dashboardCtrl"}}};$(document).ready(init),Account.$inject=["$http"],Payment.$inject=["$http"],focus.$inject=["$rootScope","$timeout"],Plan.$inject=["$q","Storage","$http"],Storage.$inject=["$q"],angular.module("pinchApp").service("Account",Account).service("Payment",Payment).factory("focus",focus).service("Plan",Plan).service("Storage",Storage),homeCtrl.$inject=["$scope","$auth","$state","Account","$window","$rootScope","$location"],authCtrl.$inject=["$scope","$auth","$state","Account","$window","$rootScope"],dashboardCtrl.$inject=["$scope","$auth","$state","Account","$rootScope","Payment","$window"],dashboardPlanCtrl.$inject=["$scope","Account","$stateParams","$state","Plan","$rootScope"],angular.module("pinchApp").controller("homeCtrl",homeCtrl).controller("authCtrl",authCtrl).controller("dashboardCtrl",dashboardCtrl).controller("dashboardPlanCtrl",dashboardPlanCtrl),angular.module("pinchApp").directive("focusOn",focusOn),angular.module("pinchApp").directive("toolTip",toolTip);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFtb2R1bGUuanMiLCJtYWluLmpzIiwic2VydmljZXMuanMiLCJjb250cm9sbGVycy9jb250cm9sbGVycy5qcyIsImRpcmVjdGl2ZXMvZm9jdXNPbi5kaXJlY3RpdmUuanMiLCJkaXJlY3RpdmVzL3Rvb2xUaXAuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbImluaXQiLCJzdGlja3kiLCJ3aW5kb3dTY3JvbGxEb3duIiwiJCIsInRvcFNwYWNpbmciLCJzdCIsImxhc3RTY3JvbGxUb3AiLCJ3aW5kb3ciLCJzY3JvbGwiLCJ0aGlzIiwic2Nyb2xsVG9wIiwicmVtb3ZlQ2xhc3MiLCJjc3MiLCJhZGRDbGFzcyIsIkFjY291bnQiLCIkaHR0cCIsImdldEN1cnJlbnRVc2VyIiwibWV0aG9kIiwidXJsIiwic2VuZFZlcmlmeUNvZGUiLCJ1c2VyT2JqIiwiZGF0YSIsInZlcmlmeUNvZGUiLCJnZXRVc2VyRGF0YSIsInVyaVVzZXJJZCIsInVwZGF0ZVVzZXJEYXRhIiwiUGF5bWVudCIsImNoYXJnZU5vdyIsImRhdGFPYmoiLCJmb2N1cyIsIiRyb290U2NvcGUiLCIkdGltZW91dCIsIm5hbWUiLCIkYnJvYWRjYXN0IiwiUGxhbiIsIiRxIiwiU3RvcmFnZSIsImFkZFNpbmdsZVByZXZpZXciLCJwbGFuIiwicmVzIiwicmVxIiwibG9jYWxTdG9yYWdlIiwicGxhblByZXZpZXdEYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFNpbmdsZVByZXZpZXciLCJyZWoiLCJwYXJzZSIsInNhdmVTaW5nbGVQbGFuIiwiZ2V0Iiwic2F2ZSIsIm9iaiIsImNvbnNvbGUiLCJsb2ciLCJob21lQ3RybCIsIiRzY29wZSIsIiRhdXRoIiwiJHN0YXRlIiwiJHdpbmRvdyIsIiRsb2NhdGlvbiIsImdldFRva2VuIiwidGhlbiIsImN1cnJlbnRVc2VyIiwiZXJyIiwiZ28iLCIkJHBhdGgiLCJpbmNsdWRlcyIsIiRvbiIsImV2IiwidG8iLCJ0b1BhcmFtcyIsImZyb20iLCJmcm9tUGFyYW1zIiwicHJldmlvdXNTdGF0ZSIsImN1cnJlbnRTdGF0ZSIsImN1cnJlbnRVcmwiLCJhdXRoQ3RybCIsImF1dGhfZW50ZXIiLCJhdXRoRGF0YSIsInNpZ251cCIsInNldFRva2VuIiwicmVsb2FkIiwiYXV0aGVudGljYXRlIiwicHJvdmlkZXIiLCJkYXNoYm9hcmRDdHJsIiwibG9nb3V0IiwibG9jYXRpb24iLCJwaG9uZSIsImxlbmd0aCIsInVzZXJEYXRhIiwidmVyaWZ5UGhvbmVTZW50T3V0IiwiY29kZSIsIm1zZyIsInZlcmlmaWVkIiwiZG9DaGVja291dCIsInRva2VuIiwic3RyaXBlVG9rZW4iLCJkYXNoYm9hcmRQbGFuQ3RybCIsIiRzdGF0ZVBhcmFtcyIsInVwZGF0ZVRpbWVzIiwidGltZXMiLCJpbnN0YWxsbWVudHNHcmFwaERhdGEiLCJpIiwiaW5zdGFsbG1lbnQiLCJ0b3RhbCIsImhlaWdodCIsInB1c2giLCJwcmljZSIsInN0eWxlIiwid2lkdGgiLCJkZWZhdWx0UGxhblRpbWVzIiwicHJldmlld1NpbmdsZVBsYW4iLCJzaW5nbGVQYXltZW50IiwiZG93bnBheSIsImludGVydmFsU2VsZWN0ZWQiLCJjaG9pY2UiLCJpbnRlcnZhbCIsInBsYW5QcmV2aWV3Iiwic2F2ZVNpbmdsZVBsYW5JbmZvIiwicGxhbkRldGFpbHMiLCJjcmVhdG9yIiwiZm9jdXNPbiIsInNjb3BlIiwiZWxlbSIsImF0dHIiLCJlIiwidG9vbFRpcCIsImVsZW1lbnQiLCJhdHRycyIsImFuZ3VsYXIiLCJvbiIsImhpZGVUb29sdGlwIiwic2hvd1Rvb2x0aXAiLCJ0b29sdGlwIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkYXV0aFByb3ZpZGVyIiwiU3RyaXBlIiwic2V0UHVibGlzaGFibGVLZXkiLCJzdGF0ZSIsImxhbmRpbmciLCJhdXRoRW50cmFuY2UiLCJkYXNoYm9hcmQiLCJkYXNoYm9hcmRfcGF5bWVudCIsImRhc2hib2FyZF9wbGFuIiwiZGFzaGJvYXJkX3BsYW5fc3RhcnQiLCJkYXNoYm9hcmRfcGxhbl9jaG9vc2UiLCJkYXNoYm9hcmRfcGxhbl9zaW5nbGUiLCJkYXNoYm9hcmRfcGxhbl9zaW5nbGVfcHJldmlldyIsImRhc2hib2FyZF9wbGFuX211bHRpcGxlIiwiZGFzaGJvYXJkX2FjY291bnQiLCJvdGhlcndpc2UiLCJ2aWV3cyIsIm1haW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJwYXJlbnQiLCJkYXNoYm9hcmRfc2VjdGlvbiIsImRhc2hib2FyZF9jaGlsZF9zZWN0aW9uIiwiZG9jdW1lbnQiLCJyZWFkeSIsIiRpbmplY3QiLCJzZXJ2aWNlIiwiZmFjdG9yeSIsImRpcmVjdGl2ZSJdLCJtYXBwaW5ncyI6IkFBQUEsWUNJQSxTQUFTQSxRQUNMQyxTQUNBQyxtQkFHSixRQUFTRCxVQUNMRSxFQUFFLDRCQUE0QkYsUUFDMUJHLFdBQVksS0FJcEIsUUFBU0Ysb0JBQ0wsR0FDSUcsR0FEQUMsRUFBZ0IsQ0FFcEJILEdBQUVJLFFBQVFDLE9BQU8sV0FFYkgsRUFBS0YsRUFBRU0sTUFBTUMsWUFDVlAsRUFBRUksUUFBUUcsWUFBYyxLQUNkSixFQUFMRCxHQUNBRixFQUFFLGtCQUFrQlEsWUFBWSxVQUNoQ1IsRUFBRSxrQkFBa0JTLElBQUksZ0JBQWlCLGNBRXpDVCxFQUFFLGtCQUFrQlUsU0FBUyxXQUdyQ1AsRUFBZ0JELEVBRVpGLEVBQUVJLFFBQVFHLFlBQWMsSUFDeEJQLEVBQUUsa0JBQWtCVSxTQUFTLE9BRTdCVixFQUFFSSxRQUFRRyxZQUFjLElBQ3hCUCxFQUFFLGtCQUFrQlEsWUFBWSxPQUVoQ1IsRUFBRUksUUFBUUcsWUFBYyxHQUd4QlAsRUFBRUksUUFBUUcsWUFBYyxLQUN4QlAsRUFBRSxrQkFBa0JTLElBQUksYUFBYyxzQ0FFdENULEVBQUVJLFFBQVFHLFlBQWMsS0FDeEJQLEVBQUUsa0JBQWtCUyxJQUFJLGFBQWMsMENDbENsRCxRQUFTRSxTQUFRQyxHQUNiTixLQUFLTyxlQUFpQixXQU1sQixNQUFPRCxJQUNIRSxPQUFRLE1BQ1JD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T0FDSU0seUJBQ0lKLFlBQWEscURBQ2JDLFdBQVksdUJBSXBCTix5QkFDQXZILEtBQU0sMEJBQ05kLElBQUssa0JBQ0w0SSxPQUFRLGlCQUNSSixPQUNJTSx5QkFDSUosWUFBYSwrQ0FDYkMsV0FBWSxtQkFJcEJMLG1CQUNBeEgsS0FBTSxvQkFDTmQsSUFBSyxXQUNMNEksT0FBUSxZQUNSSixPQUNJSyxtQkFDSUgsWUFBYSwrQkFDYkMsV0FBWSxrQkN4S3hCMUosR0FBRThKLFVBQVVDLE1BQU1sSyxNQ0FsQmMsUUFBUXFKLFNBQVcsU0FDbkJ6SSxRQUFReUksU0FBVyxTQUNuQnRJLE1BQU1zSSxTQUFXLGFBQWMsWUFDL0JqSSxLQUFLaUksU0FBVyxLQUFNLFVBQVcsU0FDakMvSCxRQUFRK0gsU0FBVyxNQUpuQmxDLFFBQ0tLLE9BQU8sWUFDUDhCLFFBQVEsVUFBV3RKLFNBQ25Cc0osUUFBUSxVQUFXMUksU0FDbkIySSxRQUFRLFFBQVN4SSxPQUNqQnVJLFFBQVEsT0FBUWxJLE1BQ2hCa0ksUUFBUSxVQUFXaEksU0NOeEJrQixTQUFTNkcsU0FBVyxTQUFVLFFBQVMsU0FBVSxVQUFXLFVBQVcsYUFBYyxhQUNyRnZGLFNBQVN1RixTQUFXLFNBQVUsUUFBUyxTQUFVLFVBQVcsVUFBVyxjQUN2RS9FLGNBQWMrRSxTQUFXLFNBQVUsUUFBUyxTQUFVLFVBQVcsYUFBYyxVQUFXLFdBQzFGbEUsa0JBQWtCa0UsU0FBVyxTQUFVLFVBQVcsZUFBZ0IsU0FBVSxPQUFRLGNBSHBGbEMsUUFDS0ssT0FBTyxZQUNQdUIsV0FBVyxXQUFZdkcsVUFDdkJ1RyxXQUFXLFdBQVlqRixVQUN2QmlGLFdBQVcsZ0JBQWlCekUsZUFDNUJ5RSxXQUFXLG9CQUFxQjVELG1CQ0xyQ2dDLFFBQ0tLLE9BQU8sWUFDUGdDLFVBQVUsVUFBVzdDLFNDRjFCUSxRQUNLSyxPQUFPLFlBQ1BnQyxVQUFVLFVBQVd4QyIsImZpbGUiOiJidW5kbGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgncGluY2hBcHAnLCBbXG4gICAgICAgICd1aS5yb3V0ZXInLFxuICAgICAgICAnc2F0ZWxsaXplcicsXG4gICAgICAgICduZ0FuaW1hdGUnLFxuICAgICAgICAvLyAndWkuYm9vdHN0cmFwJyxcbiAgICAgICAgJ25nRmlsZVVwbG9hZCcsXG4gICAgICAgICduZ0ltZ0Nyb3AnLFxuICAgICAgICAnc3RyaXBlLmNoZWNrb3V0JyxcbiAgICAgICAgJ2FuZ3VsYXItbG9hZGluZy1iYXInLFxuICAgICAgICAnYW5pbS1pbi1vdXQnXG4gICAgXSlcbiAgICAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRhdXRoUHJvdmlkZXIpIHtcbiAgICAgICAgU3RyaXBlLnNldFB1Ymxpc2hhYmxlS2V5KCdwa190ZXN0X3QxZVRoaE9LbDZlc3JwNmY0anlXcVU0SicpXG5cbiAgICAgICAgLy8gJGF1dGhQcm92aWRlclxuICAgICAgICAvLyAgICAgLmZhY2Vib29rKHtcbiAgICAgICAgLy8gICAgICAgICBjbGllbnRJZDogJzI5ODE2NTExMzg0OTM2NidcbiAgICAgICAgLy8gICAgIH0pO1xuXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUobGFuZGluZylcbiAgICAgICAgICAgIC5zdGF0ZShhdXRoRW50cmFuY2UpXG4gICAgICAgICAgICAuc3RhdGUoZGFzaGJvYXJkKVxuICAgICAgICAgICAgLnN0YXRlKGRhc2hib2FyZF9wYXltZW50KVxuICAgICAgICAgICAgLnN0YXRlKGRhc2hib2FyZF9wbGFuKVxuICAgICAgICAgICAgLnN0YXRlKGRhc2hib2FyZF9wbGFuX3N0YXJ0KVxuICAgICAgICAgICAgLnN0YXRlKGRhc2hib2FyZF9wbGFuX2Nob29zZSlcbiAgICAgICAgICAgIC5zdGF0ZShkYXNoYm9hcmRfcGxhbl9zaW5nbGUpXG4gICAgICAgICAgICAuc3RhdGUoZGFzaGJvYXJkX3BsYW5fc2luZ2xlX3ByZXZpZXcpXG4gICAgICAgICAgICAuc3RhdGUoZGFzaGJvYXJkX3BsYW5fbXVsdGlwbGUpXG4gICAgICAgICAgICAuc3RhdGUoZGFzaGJvYXJkX2FjY291bnQpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHBhZ2UpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHBhZ2VfcHJvamVjdHMpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHBhZ2VfbGlrZWQpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHBhZ2VfZm9sbG93ZXJzKVxuICAgICAgICAgICAgLy8gLnN0YXRlKHByb2plY3RwYWdlKVxuICAgICAgICAgICAgLy8gLnN0YXRlKHByb2plY3RTZXR0aW5nKVxuICAgICAgICAgICAgLy8gLnN0YXRlKHByb2plY3RTZXR0aW5nX2dlbmVyYWwpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHJvamVjdFNldHRpbmdfcmVxdWVzdClcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9qZWN0U2V0dGluZ19wcml2YWN5KVxuICAgICAgICAgICAgLy8gLnN0YXRlKHByb2plY3RTZXR0aW5nX2RhbmdlcilcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9maWxlU2V0dGluZylcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9maWxlU2V0dGluZ19nZW5lcmFsKVxuICAgICAgICAgICAgLy8gLnN0YXRlKHByb2ZpbGVTZXR0aW5nX3JlcXVlc3QpXG4gICAgICAgICAgICAvLyAuc3RhdGUocHJvZmlsZVNldHRpbmdfcHJpdmFjeSlcbiAgICAgICAgICAgIC8vIC5zdGF0ZShwcm9maWxlU2V0dGluZ19kYW5nZXIpXG5cblxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG4gICAgfSk7XG5cblxubGV0IGxhbmRpbmcgPSB7XG4gICAgbmFtZTogJ2xhbmRpbmcnLFxuICAgIHVybDogJy8nLFxuICAgIHZpZXdzOiB7XG4gICAgICAgIG1haW46IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvbGFuZGluZy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhdXRoQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBhdXRoRW50cmFuY2UgPSB7XG4gICAgbmFtZTogJ2F1dGhFbnRyYW5jZScsXG4gICAgdXJsOiAnL2VudHJhbmNlJyxcbiAgICB2aWV3czoge1xuICAgICAgICBtYWluOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2VudHJhbmNlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2F1dGhDdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGRhc2hib2FyZCA9IHtcbiAgICBuYW1lOiAnZGFzaGJvYXJkJyxcbiAgICB1cmw6ICcvZGFzaGJvYXJkJyxcbiAgICB2aWV3czoge1xuICAgICAgICBtYWluOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2Rhc2hib2FyZC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRDdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxuXG5sZXQgZGFzaGJvYXJkX3BheW1lbnQgPSB7XG4gICAgbmFtZTogJ2Rhc2hib2FyZF9wYXltZW50JyxcbiAgICB1cmw6ICcvcGF5bWVudCcsXG4gICAgcGFyZW50OiAnZGFzaGJvYXJkJyxcbiAgICB2aWV3czoge1xuICAgICAgICBkYXNoYm9hcmRfc2VjdGlvbjoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvaHRtbC9kYXNoYm9hcmRfcGF5bWVudC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRDdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGRhc2hib2FyZF9wbGFuID0ge1xuICAgIG5hbWU6ICdkYXNoYm9hcmRfcGxhbicsXG4gICAgdXJsOiAnL3BsYW4nLFxuICAgIHBhcmVudDogJ2Rhc2hib2FyZCcsXG4gICAgdmlld3M6IHtcbiAgICAgICAgZGFzaGJvYXJkX3NlY3Rpb246IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvZGFzaGJvYXJkX3BsYW4uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZGFzaGJvYXJkQ3RybCdcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBkYXNoYm9hcmRfcGxhbl9zdGFydCA9IHtcbiAgICBuYW1lOiAnZGFzaGJvYXJkX3BsYW5fc3RhcnQnLFxuICAgIHVybDogJy9zdGFydCcsXG4gICAgcGFyZW50OiAnZGFzaGJvYXJkX3BsYW4nLFxuICAgIHZpZXdzOiB7XG4gICAgICAgIGRhc2hib2FyZF9jaGlsZF9zZWN0aW9uOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2Rhc2hib2FyZC9kYXNoYm9hcmRfcGxhbl9zdGFydC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRDdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGRhc2hib2FyZF9wbGFuX2Nob29zZSA9IHtcbiAgICBuYW1lOiAnZGFzaGJvYXJkX3BsYW5fY2hvb3NlJyxcbiAgICB1cmw6ICcvY2hvb3NlJyxcbiAgICBwYXJlbnQ6ICdkYXNoYm9hcmRfcGxhbicsXG4gICAgdmlld3M6IHtcbiAgICAgICAgZGFzaGJvYXJkX2NoaWxkX3NlY3Rpb246IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvZGFzaGJvYXJkL2Rhc2hib2FyZF9wbGFuX2Nob29zZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRDdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGRhc2hib2FyZF9wbGFuX3NpbmdsZSA9IHtcbiAgICBuYW1lOiAnZGFzaGJvYXJkX3BsYW5fc2luZ2xlJyxcbiAgICB1cmw6ICcvY2hvb3NlL3NpbmdsZScsXG4gICAgcGFyZW50OiAnZGFzaGJvYXJkX3BsYW4nLFxuICAgIHZpZXdzOiB7XG4gICAgICAgIGRhc2hib2FyZF9jaGlsZF9zZWN0aW9uOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9odG1sL2Rhc2hib2FyZC9kYXNoYm9hcmRfcGxhbl9zaW5nbGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZGFzaGJvYXJkUGxhbkN0cmwnXG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgZGFzaGJvYXJkX3BsYW5fc2luZ2xlX3ByZXZpZXcgPSB7XG4gICAgbmFtZTogJ2Rhc2hib2FyZF9wbGFuX3NpbmdsZV9wcmV2aWV3JyxcbiAgICB1cmw6ICcvY2hvb3NlL3NpbmdsZS9wcmV2aWV3JyxcbiAgICBwYXJlbnQ6ICdkYXNoYm9hcmRfcGxhbicsXG4gICAgdmlld3M6IHtcbiAgICAgICAgZGFzaGJvYXJkX2NoaWxkX3NlY3Rpb246IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvZGFzaGJvYXJkL2Rhc2hib2FyZF9wbGFuX3NpbmdsZV9wcmV2aWV3Lmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2Rhc2hib2FyZFBsYW5DdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IGRhc2hib2FyZF9wbGFuX211bHRpcGxlID0ge1xuICAgIG5hbWU6ICdkYXNoYm9hcmRfcGxhbl9tdWx0aXBsZScsXG4gICAgdXJsOiAnL2Nob29zZS9tdXRpcGxlJyxcbiAgICBwYXJlbnQ6ICdkYXNoYm9hcmRfcGxhbicsXG4gICAgdmlld3M6IHtcbiAgICAgICAgZGFzaGJvYXJkX2NoaWxkX3NlY3Rpb246IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2h0bWwvZGFzaGJvYXJkL2Rhc2hib2FyZF9wbGFuX211bHRpcGxlLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2Rhc2hib2FyZEN0cmwnXG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgZGFzaGJvYXJkX2FjY291bnQgPSB7XG4gICAgbmFtZTogJ2Rhc2hib2FyZF9hY2NvdW50JyxcbiAgICB1cmw6ICcvYWNjb3VudCcsXG4gICAgcGFyZW50OiAnZGFzaGJvYXJkJyxcbiAgICB2aWV3czoge1xuICAgICAgICBkYXNoYm9hcmRfc2VjdGlvbjoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvaHRtbC9kYXNoYm9hcmRfYWNjb3VudC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdkYXNoYm9hcmRDdHJsJ1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGluaXQpO1xuXG5mdW5jdGlvbiBpbml0KCkge1xuICAgIHN0aWNreSgpXG4gICAgd2luZG93U2Nyb2xsRG93bigpXG59XG5cbmZ1bmN0aW9uIHN0aWNreSgpIHtcbiAgICAkKFwiLnNpbmdsZVBsYW5QcmV2aWV3U3RpY2t5XCIpLnN0aWNreSh7XG4gICAgICAgIHRvcFNwYWNpbmc6IDgwXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gd2luZG93U2Nyb2xsRG93bigpIHtcbiAgICB2YXIgbGFzdFNjcm9sbFRvcCA9IDBcbiAgICB2YXIgc3RcbiAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygkKHdpbmRvdykuc2Nyb2xsVG9wKCkpO1xuICAgICAgICBzdCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG4gICAgICAgIGlmKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDMwKXtcbiAgICAgICAgICAgIGlmIChzdCA8IGxhc3RTY3JvbGxUb3ApIHtcbiAgICAgICAgICAgICAgICAkKCcuaG9tZS1wYWdlIG5hdicpLnJlbW92ZUNsYXNzKCdmb2xkZWQnKVxuICAgICAgICAgICAgICAgICQoJy5ob21lLXBhZ2UgbmF2JykuY3NzKCdib3JkZXItYm90dG9tJywgJzBweCBzb2xpZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuaG9tZS1wYWdlIG5hdicpLmFkZENsYXNzKCdmb2xkZWQnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxhc3RTY3JvbGxUb3AgPSBzdFxuXG4gICAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPCAxMCkge1xuICAgICAgICAgICAgJCgnLmhvbWUtcGFnZSBuYXYnKS5hZGRDbGFzcygndG9wJylcbiAgICAgICAgfVxuICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gMTApIHtcbiAgICAgICAgICAgICQoJy5ob21lLXBhZ2UgbmF2JykucmVtb3ZlQ2xhc3MoJ3RvcCcpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDMwKSB7XG5cbiAgICAgICAgfVxuICAgICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpIDwgNTQwKSB7XG4gICAgICAgICAgICAkKCcuaG9tZS1wYWdlIG5hdicpLmNzcygnYm94LXNoYWRvdycsICdpbnNldCAwIC0xcHggMHB4IDBweCByZ2JhKDAsMCwwLDApJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDU0MCkge1xuICAgICAgICAgICAgJCgnLmhvbWUtcGFnZSBuYXYnKS5jc3MoJ2JveC1zaGFkb3cnLCAnaW5zZXQgMCAtMXB4IDBweCAwcHggcmdiYSgwLDAsMCwwLjEpJyk7XG4gICAgICAgIH1cblxuICAgIH0pXG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdwaW5jaEFwcCcpXG4gICAgLnNlcnZpY2UoJ0FjY291bnQnLCBBY2NvdW50KVxuICAgIC5zZXJ2aWNlKCdQYXltZW50JywgUGF5bWVudClcbiAgICAuZmFjdG9yeSgnZm9jdXMnLCBmb2N1cylcbiAgICAuc2VydmljZSgnUGxhbicsIFBsYW4pXG4gICAgLnNlcnZpY2UoJ1N0b3JhZ2UnLCBTdG9yYWdlKVxuXG5mdW5jdGlvbiBBY2NvdW50KCRodHRwKSB7XG4gICAgdGhpcy5nZXRDdXJyZW50VXNlciA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICB1cmw6IGAvYXBpL2F1dGgvY3VycmVudFVzZXJgXG4gICAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuc2VuZFZlcmlmeUNvZGUgPSAodXNlck9iaikgPT4ge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IGAvYXBpL3ZlcmlmeS9waG9uZWAsXG4gICAgICAgICAgICBkYXRhOiB1c2VyT2JqXG4gICAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMudmVyaWZ5Q29kZSA9ICh1c2VyT2JqKSA9PiB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICAgICAgdXJsOiBgL2FwaS92ZXJpZnkvcGhvbmVgLFxuICAgICAgICAgICAgZGF0YTogdXNlck9ialxuICAgICAgICB9KVxuICAgIH1cbiAgICB0aGlzLmdldFVzZXJEYXRhID0gKHVyaVVzZXJJZCkgPT4ge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgIHVybDogYC9hcGkvdXNlcnMvJHt1cmlVc2VySWR9YFxuICAgICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVVzZXJEYXRhID0gKHVyaVVzZXJJZCwgdXBkYXRlVXNlckRhdGEpID0+IHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICAgICAgICB1cmw6IGAvYXBpL3VzZXJzLyR7dXJpVXNlcklkfWAsXG4gICAgICAgICAgICBkYXRhOiB1cGRhdGVVc2VyRGF0YVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gUGF5bWVudCgkaHR0cCkge1xuICAgIHRoaXMuY2hhcmdlTm93ID0gKGRhdGFPYmopID0+IHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgdXJsOiBgL2FwaS9wYXltZW50L2NoYXJnZU5vd2AsXG4gICAgICAgICAgICBkYXRhOiBkYXRhT2JqXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5mdW5jdGlvbiBmb2N1cygkcm9vdFNjb3BlLCAkdGltZW91dCkge1xuICAgIHJldHVybiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdmb2N1c09uJywgbmFtZSk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUGxhbigkcSwgU3RvcmFnZSwgJGh0dHApIHtcbiAgICB0aGlzLmFkZFNpbmdsZVByZXZpZXcgPSAocGxhbikgPT4ge1xuICAgICAgICByZXR1cm4gJHEoKHJlcywgcmVxKSA9PiB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucGxhblByZXZpZXdEYXRhID0gSlNPTi5zdHJpbmdpZnkocGxhbilcbiAgICAgICAgICAgIHJlcyhsb2NhbFN0b3JhZ2UucGxhblByZXZpZXdEYXRhKVxuICAgICAgICB9KVxuICAgIH1cbiAgICB0aGlzLmdldFNpbmdsZVByZXZpZXcgPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiAkcSgocmVzLCByZWopID0+IHtcbiAgICAgICAgICAgIHJlcyhKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5wbGFuUHJldmlld0RhdGEpKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHRoaXMuc2F2ZVNpbmdsZVBsYW4gPSAoZGF0YSkgPT4ge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICB1cmw6IGAvYXBpL3BsYW5zL3NhdmVTaW5nbGVQbGFuYCxcbiAgICAgICAgICAgIGRhdGE6IGRhdGFcbiAgICAgICAgfSlcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gU3RvcmFnZSgkcSkge1xuICAgIHRoaXMuZ2V0ID0gKCkgPT4ge1xuICAgICAgICAvLyByZXR1cm4gJHEoKHJlcywgcmVqKSA9PiB7XG4gICAgICAgIC8vICAgICBpZiAoIWxvY2FsU3RvcmFnZS5zZXBlcnBheSkge1xuICAgICAgICAvLyAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXBlcnBheSA9IHt9XG4gICAgICAgIC8vICAgICAgICAgcmVzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlcGVycGF5KSlcbiAgICAgICAgLy8gICAgIH0gZWxzZSBpZiAobG9jYWxTdG9yYWdlLnNlcGVycGF5KSB7XG4gICAgICAgIC8vICAgICAgICAgcmVzKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNlcGVycGF5KSlcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICB9XG5cbiAgICB0aGlzLnNhdmUgPSAob2JqKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdvYmo6ICcsIG9iaik7XG4gICAgICAgIC8vIHZhciBrZXkgPSBvYmpcbiAgICAgICAgLy8gdmFyIG9iaiA9IEpTT04uc3RyaW5naWZ5KG9iailcbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlXG4gICAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgncGluY2hBcHAnKVxuICAgIC5jb250cm9sbGVyKCdob21lQ3RybCcsIGhvbWVDdHJsKVxuICAgIC5jb250cm9sbGVyKCdhdXRoQ3RybCcsIGF1dGhDdHJsKVxuICAgIC5jb250cm9sbGVyKCdkYXNoYm9hcmRDdHJsJywgZGFzaGJvYXJkQ3RybClcbiAgICAuY29udHJvbGxlcignZGFzaGJvYXJkUGxhbkN0cmwnLCBkYXNoYm9hcmRQbGFuQ3RybClcblxuZnVuY3Rpb24gaG9tZUN0cmwoJHNjb3BlLCAkYXV0aCwgJHN0YXRlLCBBY2NvdW50LCAkd2luZG93LCAkcm9vdFNjb3BlLCAkbG9jYXRpb24pIHtcbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uKGV2LCB0bywgdG9QYXJhbXMsIGZyb20sIGZyb21QYXJhbXMpIHtcbiAgICAgICAgJHJvb3RTY29wZS5wcmV2aW91c1N0YXRlID0gZnJvbS5uYW1lO1xuICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRTdGF0ZSA9IHRvLm5hbWU7XG4gICAgICAgIGNvbnNvbGUubG9nKCRyb290U2NvcGUucHJldmlvdXNTdGF0ZSwgJyA+Pj4gJywgJHJvb3RTY29wZS5jdXJyZW50U3RhdGUpXG4gICAgICAgIGlmICgkcm9vdFNjb3BlLmN1cnJlbnRTdGF0ZSA9PSAnYXV0aEVudHJhbmNlJyAmJiAkc2NvcGUuY3VycmVudFVzZXIpICRzdGF0ZS5nbygnZGFzaGJvYXJkJylcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRVcmwgPSAkbG9jYXRpb24uJCRwYXRoO1xuICAgICAgICBnZXRDdXJyZW50VXNlcigpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCkge1xuICAgICAgICBpZiAoJGF1dGguZ2V0VG9rZW4oKSkge1xuICAgICAgICAgICAgQWNjb3VudC5nZXRDdXJyZW50VXNlcigkYXV0aC5nZXRUb2tlbigpKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdAQ3VycmVudFVzZXI6ICcsIHJlcy5kYXRhKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gcmVzLmRhdGFcbiAgICAgICAgICAgICAgICB9LCAoZXJyKSA9PiAkc3RhdGUuZ28oJ2F1dGhFbnRyYW5jZScpKVxuICAgICAgICB9IGVsc2UgaWYgKCEkYXV0aC5nZXRUb2tlbigpICYmICRsb2NhdGlvbi4kJHBhdGguaW5jbHVkZXMoJ2Rhc2hib2FyZCcpKSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ2F1dGhFbnRyYW5jZScpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGF1dGhDdHJsKCRzY29wZSwgJGF1dGgsICRzdGF0ZSwgQWNjb3VudCwgJHdpbmRvdywgJHJvb3RTY29wZSkge1xuICAgICRzY29wZS5hdXRoX2VudGVyID0gKGF1dGhEYXRhKSA9PiB7XG4gICAgICAgICRhdXRoLnNpZ251cChhdXRoRGF0YSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgJGF1dGguc2V0VG9rZW4ocmVzKTtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2Rhc2hib2FyZCcsIHt9LCB7XG4gICAgICAgICAgICAgICAgICAgIHJlbG9hZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcyBAYXV0aF9lbnRlcjogJywgcmVzLmRhdGEpXG4gICAgICAgICAgICB9LCAoZXJyKSA9PiBjb25zb2xlLmxvZygnZXJyIEBhdXRoX2VudGVyOiAnLCBlcnIpKVxuICAgIH1cblxuICAgICRzY29wZS5hdXRoZW50aWNhdGUgPSAocHJvdmlkZXIpID0+IHtcbiAgICAgICAgJGF1dGguYXV0aGVudGljYXRlKHByb3ZpZGVyKTtcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gZGFzaGJvYXJkQ3RybCgkc2NvcGUsICRhdXRoLCAkc3RhdGUsIEFjY291bnQsICRyb290U2NvcGUsIFBheW1lbnQsICR3aW5kb3cpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnZGFzaGJvYXJkQ3RybCBsb2FkZWQnKVxuICAgIC8vIGNoZWNrVmVyaWZ5UGhvbmVTZW50U3RhdHVzKCRyb290U2NvcGUuY3VycmVudFVzZXIpXG5cbiAgICAkc2NvcGUubG9nb3V0ID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnY2hlY2snKTtcbiAgICAgICAgJGF1dGgubG9nb3V0KClcbiAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gbnVsbDtcbiAgICAgICAgJHN0YXRlLmdvKCdsYW5kaW5nJywge30sIHtcbiAgICAgICAgICAgIHJlbG9hZDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICAkd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoZWNrVmVyaWZ5UGhvbmVTZW50U3RhdHVzKGN1cnJlbnRVc2VyRGF0YSkge1xuICAgICAgICAkc2NvcGUudmVyaWZ5UGhvbmVTZW50T3V0ID0gZmFsc2VcblxuICAgICAgICBsZXQgZXhwaXJlZFRpbWUgPSBOdW1iZXIoY3VycmVudFVzZXJEYXRhLnBob25lLnZlcmlmeUNvZGUuZXhwaXJlZEF0KVxuICAgICAgICBsZXQgbm93VGltZSA9IERhdGUubm93KClcbiAgICAgICAgaWYgKGV4cGlyZWRUaW1lID4gbm93VGltZSkge1xuICAgICAgICAgICAgJHNjb3BlLnZlcmlmeVBob25lU2VudE91dCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnZlcmlmeVBob25lQ291bnREb3duID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGAke2V4cGlyZWRUaW1lfWBcbiAgICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5zZW5kVmVyaWZ5Q29kZSA9IChwaG9uZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygncGhvbmU6ICcsIHBob25lKVxuICAgICAgICBpZiAocGhvbmUubGVuZ3RoID4gNSkge1xuICAgICAgICAgICAgdmFyIHVzZXJPYmogPSB7XG4gICAgICAgICAgICAgICAgdXNlckRhdGE6ICRyb290U2NvcGUuY3VycmVudFVzZXIsXG4gICAgICAgICAgICAgICAgcGhvbmU6IHBob25lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXNlck9iajogJywgdXNlck9iaik7XG4gICAgICAgICAgICBBY2NvdW50LnNlbmRWZXJpZnlDb2RlKHVzZXJPYmopXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcyBAc2VuZFZlcmlmeUNvZGU6ICcsIHJlcy5kYXRhKVxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLnBob25lLmRhdGEgPSBwaG9uZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnZlcmlmeVBob25lU2VudE91dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSwgZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VyciBAc2VuZFZlcmlmeUNvZGU6ICcsIGVycik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbiAgICAkc2NvcGUudmVyaWZ5Q29kZSA9IChjb2RlKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdjb2RlOiAnLCBjb2RlKVxuICAgICAgICBpZiAoY29kZS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIHZhciB1c2VyT2JqID0ge1xuICAgICAgICAgICAgICAgIHVzZXJEYXRhOiAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLFxuICAgICAgICAgICAgICAgIGNvZGU6IGNvZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFjY291bnQudmVyaWZ5Q29kZSh1c2VyT2JqKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMgQHZlcmlmeUNvZGU6ICcsIHJlcy5kYXRhKVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubXNnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEubXNnID09ICdpbmNvcnJlY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycjogaW5jb3JyZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5kYXRhLm1zZyA9ICdleHBpcmVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiBleHBpcmVkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuY3VycmVudFVzZXIucGhvbmUudmVyaWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VyciBAdmVyaWZ5Q29kZTogJywgZXJyKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmRvQ2hlY2tvdXQgPSAodG9rZW4pID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ2ZmZicpO1xuICAgICAgICBjb25zb2xlLmxvZygndG9rZW46ICcsIHRva2VuKTtcbiAgICAgICAgdmFyIGRhdGFPYmogPSB7XG4gICAgICAgICAgICBzdHJpcGVUb2tlbjogdG9rZW4sXG4gICAgICAgICAgICB1c2VyRGF0YTogJHJvb3RTY29wZS5jdXJyZW50VXNlclxuICAgICAgICB9XG4gICAgICAgIFBheW1lbnQuY2hhcmdlTm93KGRhdGFPYmopLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXM6ICcsIHJlcy5kYXRhKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOiAnLCBlcnIpO1xuICAgICAgICB9KVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZGFzaGJvYXJkUGxhbkN0cmwoJHNjb3BlLCBBY2NvdW50LCAkc3RhdGVQYXJhbXMsICRzdGF0ZSwgUGxhbiwgJHJvb3RTY29wZSkge1xuICAgIGNvbnNvbGUubG9nKCdkYXNoYm9hcmRQbGFuQ3RybCBsb2FkZWQnKTtcblxuICAgIGlmICgkcm9vdFNjb3BlLmN1cnJlbnRTdGF0ZSA9PSAnZGFzaGJvYXJkX3BsYW5fc2luZ2xlJykge1xuICAgICAgICAkc2NvcGUudXBkYXRlVGltZXMgPSAodGltZXMpID0+IHtcbiAgICAgICAgICAgICRzY29wZS5pbnN0YWxsbWVudHNHcmFwaERhdGEgPSBbXVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aW1lczsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluc3RhbGxtZW50ID0gfn4oKCRzY29wZS5wbGFuLnRvdGFsIC8gdGltZXMpKTtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gfn4oMjAwICogKDIgLyB0aW1lcykpXG4gICAgICAgICAgICAgICAgJHNjb3BlLmluc3RhbGxtZW50c0dyYXBoRGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGluc3RhbGxtZW50LFxuICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBgJHtoZWlnaHR9cHhgLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGA5MCVgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLmRlZmF1bHRQbGFuVGltZXMgPSAodGltZXMpID0+IHtcbiAgICAgICAgICAgIGlmICghdGltZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLnBsYW4udGltZXMgPSAzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJHNjb3BlLnBsYW5cbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5wcmV2aWV3U2luZ2xlUGxhbiA9IChwbGFuKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncGxhbjogJywgcGxhbik7XG4gICAgICAgICAgICBQbGFuLmFkZFNpbmdsZVByZXZpZXcocGxhbikudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkX3BsYW5fc2luZ2xlX3ByZXZpZXcnKVxuICAgICAgICAgICAgfSwgKGVycikgPT4gY29uc29sZS5sb2coJ2VyciBAYWRkU2luZ2xlUHJldmlldzogJywgZXJyKSlcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5wbGFuID0ge31cblxuICAgICAgICAkc2NvcGUuc2luZ2xlUGF5bWVudCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAoKCRzY29wZS5wbGFuLnRvdGFsIC0gJHNjb3BlLnBsYW4uZG93bnBheSkgLyAkc2NvcGUucGxhbi50aW1lcylcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5pbnRlcnZhbFNlbGVjdGVkID0gKGNob2ljZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5wbGFuLmludGVydmFsID09IGNob2ljZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wbGFuLmludGVydmFsID0gbnVsbFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGxhbi5pbnRlcnZhbCA9IGNob2ljZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRyb290U2NvcGUucHJldmlvdXNTdGF0ZSA9PSAnZGFzaGJvYXJkX3BsYW5fc2luZ2xlX3ByZXZpZXcnKSB7XG4gICAgICAgICAgICBQbGFuLmdldFNpbmdsZVByZXZpZXcoKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcyBAZ2V0U2luZ2xlUHJldmlldyBkYXRhIGJhY2s6ICcsIHJlcylcbiAgICAgICAgICAgICAgICAkc2NvcGUucGxhbiA9IHJlcztcbiAgICAgICAgICAgICAgICAkc2NvcGUucGxhbi50aW1lcyA9IHJlcy50aW1lc1xuICAgICAgICAgICAgfSwgKGVycikgPT4gY29uc29sZS5sb2coJ2VyciBAZ2V0U2luZ2xlUHJldmlldzogJywgZXJyKSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICgkcm9vdFNjb3BlLmN1cnJlbnRTdGF0ZSA9PSAnZGFzaGJvYXJkX3BsYW5fc2luZ2xlX3ByZXZpZXcnKSB7XG4gICAgICAgIFBsYW4uZ2V0U2luZ2xlUHJldmlldygpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXMgQGdldFNpbmdsZVByZXZpZXc6ICcsIHJlcylcbiAgICAgICAgICAgICRzY29wZS5wbGFuUHJldmlldyA9IHJlcztcbiAgICAgICAgICAgICRzY29wZS5wbGFuUHJldmlldy5pbnN0YWxsbWVudCA9IChyZXMudG90YWwgLSByZXMuZG93bnBheSkgLyByZXMudGltZXNcbiAgICAgICAgfSwgKGVycikgPT4gY29uc29sZS5sb2coJ2VyciBAZ2V0U2luZ2xlUHJldmlldzogJywgZXJyKSlcblxuICAgICAgICAkc2NvcGUuc2F2ZVNpbmdsZVBsYW4gPSAocGxhbikgPT4ge1xuICAgICAgICAgICAgbGV0IHNhdmVTaW5nbGVQbGFuSW5mbyA9IHtcbiAgICAgICAgICAgICAgICBwbGFuRGV0YWlsczogcGxhbixcbiAgICAgICAgICAgICAgICBjcmVhdG9yOiAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZVNpbmdsZVBsYW5JbmZvOiAnLCBzYXZlU2luZ2xlUGxhbkluZm8pO1xuICAgICAgICAgICAgUGxhbi5zYXZlU2luZ2xlUGxhbihzYXZlU2luZ2xlUGxhbkluZm8pXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlcyBAc2F2ZVNpbmdsZVBsYW46ICcsIHJlcy5kYXRhKVxuICAgICAgICAgICAgICAgIH0sIChlcnIpID0+IGNvbnNvbGUubG9nKCdlcnIgQHNhdmVTaW5nbGVQbGFuOiAnLCBlcnIpKVxuXG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdwaW5jaEFwcCcpXG4gICAgLmRpcmVjdGl2ZSgnZm9jdXNPbicsIGZvY3VzT24pXG5cbmZ1bmN0aW9uIGZvY3VzT24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRyKSB7XG4gICAgICAgIHNjb3BlLiRvbignZm9jdXNPbicsIGZ1bmN0aW9uKGUsIG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChuYW1lID09PSBhdHRyLmZvY3VzT24pIHtcbiAgICAgICAgICAgICAgICBlbGVtWzBdLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdwaW5jaEFwcCcpXG4gICAgLmRpcmVjdGl2ZSgndG9vbFRpcCcsIHRvb2xUaXApXG5cbmZ1bmN0aW9uIHRvb2xUaXAoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy50b29sLXRpcCcpLm9uKCdjbGljayBtb3VzZWxlYXZlJywgaGlkZVRvb2x0aXApO1xuICAgICAgICBhbmd1bGFyLmVsZW1lbnQoJy50b29sLXRpcCcpLm9uKCdtb3VzZWVudGVyJywgc2hvd1Rvb2x0aXApO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGhpZGVUb29sdGlwKCkge1xuICAgICQodGhpcykudG9vbHRpcCgnaGlkZScpO1xufVxuXG5mdW5jdGlvbiBzaG93VG9vbHRpcCgpIHtcbiAgICAkKHRoaXMpLnRvb2x0aXAoJ3Nob3cnKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
